<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>_LT_zyc</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">_LT_zyc</h1><a id="logo" href="/.">_LT_zyc</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Start</i></a><a href="/archives/"><i class="fa fa-archive"> Archiv</i></a><a href="/about/"><i class="fa fa-user"> Über</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title"><a href="/2013/08/12/SRM-477-DIV1-1000/">SRM 477 DIV1 1000</a></h1><div class="post-meta">2013-08-12</div><div class="post-content"><p>题意：给定一棵树，最多可给这棵树增加k条捷径，每条捷径长度为L，且只能走一次，问从0出发回到0遍历所有的边需要走的最短距离。</p>
<p>树型dp，状态为dp[i][j][2]。<br>dp[i][j][0]表示从i出发，用了j次捷径，遍历完下面所有边且最后走的路径到底后没有回来的最小距离。<br>dp[i][j][1]表示从i出发，用了j次捷径，遍历完下面所有边且回到i的最小距离。<br>转移看代码：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x,y) memset(x,y,sizeof(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Min(x,y) <span class="meta-keyword">if</span>(y&lt;x) x=y</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Max(x,y) <span class="meta-keyword">if</span>(y&gt;x) x=y</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span> ;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll ;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-6</span> ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">1e8</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ev[<span class="number">205</span>],ew[<span class="number">205</span>];</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">205</span>][<span class="number">105</span>][<span class="number">2</span>],p[<span class="number">105</span>][<span class="number">2</span>];</span><br><span class="line"><span class="built_in">string</span> s = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">int</span> K,L;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">KingdomTour</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> f)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=K;i++) dp[u][i][<span class="number">0</span>] = dp[u][i][<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)ev[u].size();i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> v = ev[u][i];</span><br><span class="line">            <span class="keyword">int</span> w = ew[u][i];</span><br><span class="line">            <span class="keyword">if</span>(v==f) <span class="keyword">continue</span>;</span><br><span class="line">            dfs(v,u);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=K;i++) p[i][<span class="number">0</span>] = p[i][<span class="number">1</span>] = inf;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=K;i++)</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=K;j++)</span><br><span class="line">                    <span class="keyword">if</span>(i+j&lt;=K)&#123;</span><br><span class="line">                        Min(p[i+j+<span class="number">1</span>][<span class="number">0</span>],dp[u][i][<span class="number">0</span>]+dp[v][j][<span class="number">0</span>]+L+w);   </span><br><span class="line">                        <span class="comment">//之前有儿子节点不回来， v最后通过捷径回到u</span></span><br><span class="line">                        Min(p[i+j][<span class="number">0</span>],dp[u][i][<span class="number">0</span>]+dp[v][j][<span class="number">1</span>]+<span class="number">2</span>*w);     </span><br><span class="line">                        <span class="comment">//之前有儿子节点不回来， v直接走回到u</span></span><br><span class="line">                        Min(p[i+j][<span class="number">0</span>],dp[u][i][<span class="number">1</span>]+dp[v][j][<span class="number">0</span>]+w);       </span><br><span class="line">                        <span class="comment">//之前没有儿子节点不回来，v不回到u    </span></span><br><span class="line">                        Min(p[i+j][<span class="number">1</span>],dp[u][i][<span class="number">1</span>]+dp[v][j][<span class="number">1</span>]+<span class="number">2</span>*w);     </span><br><span class="line">                        <span class="comment">//之前没有儿子节点不回来，v直接走回到u</span></span><br><span class="line">                        Min(p[i+j+<span class="number">1</span>][<span class="number">1</span>],dp[u][i][<span class="number">1</span>]+dp[v][j][<span class="number">0</span>]+w+L);   </span><br><span class="line">                        <span class="comment">//之前没有儿子节点不回来，v最后通过捷径回到u</span></span><br><span class="line">                        Min(p[i+j+<span class="number">1</span>][<span class="number">1</span>],dp[u][i][<span class="number">0</span>] + dp[v][j][<span class="number">0</span>]+L+w);     </span><br><span class="line">                        <span class="comment">//之前有儿子节点不回来，直接走到当前儿子叶子节点走回来。</span></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=K;i++)&#123;</span><br><span class="line">                dp[u][i][<span class="number">0</span>] = p[i][<span class="number">0</span>];</span><br><span class="line">                dp[u][i][<span class="number">1</span>] = p[i][<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> &amp;w,<span class="keyword">int</span> &amp;i)</span></span>&#123;</span><br><span class="line">	    w = <span class="number">0</span>;</span><br><span class="line">	    <span class="keyword">while</span>(i&lt;(<span class="keyword">int</span>)s.size() &amp;&amp; s[i]&lt;=<span class="string">'9'</span> &amp;&amp; s[i]&gt;=<span class="string">'0'</span>)&#123;</span><br><span class="line">            w = w*<span class="number">10</span> +s[i]-<span class="string">'0'</span>;</span><br><span class="line">            i++;</span><br><span class="line">	    &#125;</span><br><span class="line">        i++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">minTime</span><span class="params">(<span class="keyword">int</span> N, <span class="built_in">vector</span> &lt;<span class="built_in">string</span>&gt; roads, <span class="keyword">int</span> K, <span class="keyword">int</span> L)</span></span>&#123;</span><br><span class="line">	    ::K = K;</span><br><span class="line">	    ::L = L;</span><br><span class="line">	    s = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)roads.size();i++) s += roads[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;N;i++) ev[i].clear(),ew[i].clear();</span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> u,v,w;</span><br><span class="line">            get(u,l);</span><br><span class="line">            get(v,l);</span><br><span class="line">            get(w,l);</span><br><span class="line">            ev[u].push_back(v);ew[u].push_back(w);</span><br><span class="line">            ev[v].push_back(u);ew[v].push_back(w);</span><br><span class="line">            <span class="keyword">if</span>(l&gt;=(<span class="keyword">int</span>)s.size()) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> ans = inf;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=K;i++) ans = min(ans,dp[<span class="number">0</span>][i][<span class="number">1</span>]);</span><br><span class="line">		<span class="keyword">return</span> ans;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Powered by FileEdit</span></span><br><span class="line"><span class="comment">// Powered by TZTester 1.01 [25-Feb-2003]</span></span><br><span class="line"><span class="comment">// Powered by CodeProcessor</span></span><br></pre></td></tr></table></figure></p></div><p class="readmore"><a href="/2013/08/12/SRM-477-DIV1-1000/">Mehr lesen</a></p></div><div class="post"><h1 class="post-title"><a href="/2013/08/12/TopCoder-SRM-474-DIV1-1000/">TopCoder SRM 474 DIV1 1000</a></h1><div class="post-meta">2013-08-12</div><div class="post-content"><p>题意：把一棵树对应到一张无向图上有多少种方案，即满足树上两点之间有边，那图上对应的两点之间也有边的方案。N&lt;=14</p>
<p>只要想到这是树型dp，这题就不难，状态为dp[i][j][mask]，表示到树上节点为i对应图上节点为j时它及子树已经用过图上节点mask的方案数。mask是状态压缩。<br>转移的时候尽量优化，否则会tle。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INC(x,y) x = (x+y)%mod;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x,y) memset(x,y,sizeof(x))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span> ;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll ;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-6</span> ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ll mod = <span class="number">1000000007</span>;</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">15</span>][<span class="number">15</span>][<span class="number">1</span>&lt;&lt;<span class="number">14</span>];</span><br><span class="line"><span class="keyword">int</span> p[<span class="number">15</span>][<span class="number">1</span>&lt;&lt;<span class="number">14</span>];</span><br><span class="line"><span class="keyword">int</span> g[<span class="number">20</span>][<span class="number">20</span>],t[<span class="number">20</span>][<span class="number">20</span>];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GameWithGraphAndTree</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> f)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> fb = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> v=<span class="number">0</span>;v&lt;n;v++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!t[u][v] || v==f) <span class="keyword">continue</span>;</span><br><span class="line">            dfs(v,u);</span><br><span class="line">            <span class="keyword">if</span>(fb == <span class="number">0</span>)&#123;</span><br><span class="line">                fb = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)</span><br><span class="line">                        <span class="keyword">if</span>(g[i][j])</span><br><span class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;(<span class="number">1</span>&lt;&lt;n);k++)</span><br><span class="line">                            <span class="keyword">if</span>(((k&gt;&gt;i)&amp;<span class="number">1</span>)==<span class="number">0</span>)&#123;</span><br><span class="line">                                INC(dp[u][i][k|(<span class="number">1</span>&lt;&lt;i)],dp[v][j][k]);</span><br><span class="line">                            &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                clr(p,<span class="number">0</span>);</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;(<span class="number">1</span>&lt;&lt;n);k++)</span><br><span class="line">                    <span class="keyword">if</span>(((k&gt;&gt;i)&amp;<span class="number">1</span>) &amp;&amp; dp[u][i][k])</span><br><span class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)</span><br><span class="line">                        <span class="keyword">if</span>(g[i][j])&#123;</span><br><span class="line">                            <span class="keyword">int</span> rt = (<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span>-k;</span><br><span class="line">                            <span class="keyword">for</span>(<span class="keyword">int</span> l=rt;l&gt;<span class="number">0</span>;l=(l<span class="number">-1</span>)&amp;rt)&#123;</span><br><span class="line">                                <span class="keyword">if</span>((l&gt;&gt;j)&amp;<span class="number">1</span>)&#123;</span><br><span class="line">                                    INC(p[i][k|l] , dp[u][i][k] * dp[v][j][l]);</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;(<span class="number">1</span>&lt;&lt;n);j++) dp[u][i][j] = p[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(fb==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) dp[u][i][<span class="number">1</span>&lt;&lt;i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="built_in">vector</span> &lt;<span class="built_in">string</span>&gt; g, <span class="built_in">vector</span> &lt;<span class="built_in">string</span>&gt; t)</span></span>&#123;</span><br><span class="line">        n = g.size();</span><br><span class="line">        clr(dp,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(g[i][j]==<span class="string">'Y'</span>) ::g[i][j] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span> ::g[i][j] = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">if</span>(t[i][j]==<span class="string">'Y'</span>) ::t[i][j] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span> ::t[i][j] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        dfs(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;(<span class="number">1</span>&lt;&lt;n);j++) ans = (ans+dp[<span class="number">0</span>][i][j])%mod;</span><br><span class="line">		<span class="keyword">return</span>  ans;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Powered by FileEdit</span></span><br><span class="line"><span class="comment">// Powered by TZTester 1.01 [25-Feb-2003]</span></span><br><span class="line"><span class="comment">// Powered by CodeProcessor</span></span><br></pre></td></tr></table></figure></p></div><p class="readmore"><a href="/2013/08/12/TopCoder-SRM-474-DIV1-1000/">Mehr lesen</a></p></div><div class="post"><h1 class="post-title"><a href="/2013/08/11/POJ-3415-Common-Substrings/">POJ 3415 Common Substrings</a></h1><div class="post-meta">2013-08-11</div><div class="post-content"><p>题意：求两个串中相同的长度大于K的子串对数。</p>
<p>两个串链接起来做后缀数组。<br>假设height数组为：<br> 0 2 1 4 3 2 4<br> 0 0 0 1 0 0 1<br>0表示是第一个串的后缀，1表示是第二个串的后缀。<br>如果现在求第7个后缀，能与之前第一个串的后缀得到多少的长度大于k的子串对数。<br>可以发现[1,2]区间的后缀和第7个后缀最长匹配都为1，[3,5]区间的后缀最长匹配为2,[6,6]区间的最长匹配为3, 因此用单调栈找到前一个比他小的height，那么这段区间的每个后缀都能得到 heigth-k+1个与第7个后缀长度大于等于k的子串。<br>因此需要从前往后，从后往前维护两次单调栈，分别得到每个第二个串的后缀能与之前或之后第一个串的后缀匹配的个数，答案求和即可.<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(a,b) memset(a,b,sizeof(a))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">100000000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1000010</span>;</span><br><span class="line"><span class="keyword">int</span> ua[N], ub[N], us[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> *r,<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> l)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> r[a]==r[b]&amp;&amp;r[a+l]==r[b+l];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">da</span><span class="params">(<span class="keyword">int</span> *r,<span class="keyword">int</span> *sa,<span class="keyword">int</span> n,<span class="keyword">int</span> m)</span>  <span class="comment">//da(r, sa, n + 1, 256);(r[n] = 0)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i,j,p,*x=ua,*y=ub,*t;</span><br><span class="line"><span class="comment">//r[]存放原字符串,且从char变为int</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;m; i++) us[i]=<span class="number">0</span>; <span class="comment">//sa[i]表示排名为i的后缀起始下标(i&gt;=1,sa[i]&gt;=0)</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;n; i++) us[x[i]=r[i]]++;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;m; i++) us[i]+=us[i<span class="number">-1</span>];</span><br><span class="line">    <span class="keyword">for</span>(i=n<span class="number">-1</span>; i&gt;=<span class="number">0</span>; i--) sa[--us[x[i]]]=i;</span><br><span class="line">    <span class="keyword">for</span>(j=<span class="number">1</span>,p=<span class="number">1</span>; p&lt;n; j*=<span class="number">2</span>,m=p)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(p=<span class="number">0</span>,i=n-j; i&lt;n; i++) y[p++]=i;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;n; i++) <span class="keyword">if</span>(sa[i]&gt;=j) y[p++]=sa[i]-j;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;m; i++) us[i]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;n; i++) us[x[i]]++;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;m; i++) us[i]+=us[i<span class="number">-1</span>];</span><br><span class="line">        <span class="keyword">for</span>(i=n<span class="number">-1</span>; i&gt;=<span class="number">0</span>; i--) sa[--us[x[y[i]]]]=y[i];</span><br><span class="line">        <span class="keyword">for</span>(t=x,x=y,y=t,p=<span class="number">1</span>,x[sa[<span class="number">0</span>]]=<span class="number">0</span>,i=<span class="number">1</span>; i&lt;n; i++)</span><br><span class="line">            x[sa[i]]=cmp(y,sa[i<span class="number">-1</span>],sa[i],j)?p<span class="number">-1</span>:p++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> rank[N],height[N]; <span class="comment">//height[i]为排第i-1和第i的后缀的公共前缀长度</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">calheight</span><span class="params">(<span class="keyword">int</span> *r,<span class="keyword">int</span> *sa,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i,j,k=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=n; i++) rank[sa[i]]=i;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;n; height[rank[i++]]=k)</span><br><span class="line">        <span class="keyword">for</span>(k?k--:<span class="number">0</span>,j=sa[rank[i]<span class="number">-1</span>]; r[i+k]==r[j+k]; k++);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,m,k;</span><br><span class="line"><span class="keyword">int</span> a[N],sa[N],st[N],top;</span><br><span class="line">ll sum[N];</span><br><span class="line"><span class="keyword">char</span> s[N];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">gao</span><span class="params">(<span class="keyword">int</span> height[])</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n+m+<span class="number">1</span>;i++)</span><br><span class="line">        <span class="keyword">if</span>(sa[i] &lt; n)</span><br><span class="line">            sum[i] = sum[i<span class="number">-1</span>]+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            sum[i] = sum[i<span class="number">-1</span>];</span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    ll val = <span class="number">0</span>;</span><br><span class="line">    top = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n+m+<span class="number">1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(top&gt;<span class="number">0</span> &amp;&amp; height[i] &lt; height[st[top]])&#123;</span><br><span class="line">            <span class="keyword">int</span> x = st[top] , y = st[top<span class="number">-1</span>];</span><br><span class="line">            <span class="keyword">if</span>(height[x]-k&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(y&gt;<span class="number">0</span>)</span><br><span class="line">                    val -= (sum[x<span class="number">-1</span>]-sum[y<span class="number">-1</span>])*(height[x]-k+<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    val -= sum[x<span class="number">-1</span>]*(height[x]-k+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            top--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> x = i,y = st[top];</span><br><span class="line">        <span class="keyword">if</span>(height[x]-k&gt;=<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">if</span>(y&gt;<span class="number">0</span>)</span><br><span class="line">                val += (sum[x<span class="number">-1</span>]-sum[y<span class="number">-1</span>])*(height[x]-k+<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                val += sum[x<span class="number">-1</span>]*(height[x]-k+<span class="number">1</span>);</span><br><span class="line">        st[++top] = i;</span><br><span class="line">        <span class="keyword">if</span>(sa[i]&gt;n)</span><br><span class="line">            ans += val;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//    freopen("/home/zyc/Documents/Code/cpp/in","r",stdin);</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;k);</span><br><span class="line">        <span class="keyword">if</span>(k==<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>,s);</span><br><span class="line">        n = <span class="built_in">strlen</span>(s);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) a[i] = s[i];</span><br><span class="line">        a[n] = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>,s);</span><br><span class="line">        m = <span class="built_in">strlen</span>(s);</span><br><span class="line">        <span class="keyword">for</span>(    <span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++) a[i+n+<span class="number">1</span>] = s[i];</span><br><span class="line">        a[n+m+<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        da(a,sa,n+m+<span class="number">2</span>,<span class="number">256</span>);</span><br><span class="line">        calheight(a,sa,n+m+<span class="number">1</span>);</span><br><span class="line">        ll ans = <span class="number">0</span>;</span><br><span class="line">        ans += gao(height);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n+m+<span class="number">1</span>;i++) st[i] = sa[n+m+<span class="number">1</span>-i+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n+m+<span class="number">1</span>;i++) sa[i] = st[i];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n+m+<span class="number">1</span>;i++) st[i] = height[n+m+<span class="number">1</span>-i+<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n+m+<span class="number">1</span>;i++) height[i] = st[i];</span><br><span class="line"></span><br><span class="line">        ans += gao(height);</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></div><p class="readmore"><a href="/2013/08/11/POJ-3415-Common-Substrings/">Mehr lesen</a></p></div><div class="post"><h1 class="post-title"><a href="/2013/08/07/HDU-4654-k-edge-connected-components/">HDU 4654 k-edge connected components</a></h1><div class="post-meta">2013-08-07</div><div class="post-content"><p>题意：求一个无向图中，k联通分量的个数。</p>
<p>迭代过程：<br>用Stoer_Wagner求出当前全局最小割，判断是否大于k，是就返回，不是就按割边把图分成两个部分继续迭代。<br>用Soter_Wagner按最小割把图分为两部分的方法：此算法一直把点合并，当合并到某一状态时，当前最小割被更新了，那么对于当前最小割 ，”prim”时最后加入的那个点及和他合并的点就是一部分，剩余的点就是另一部分，得到最小割时划分的两部分即可。</p></div><p class="readmore"><a href="/2013/08/07/HDU-4654-k-edge-connected-components/">Mehr lesen</a></p></div><div class="post"><h1 class="post-title"><a href="/2013/08/06/suffix-automation/">suffix automation</a></h1><div class="post-meta">2013-08-06</div><div class="post-content"><p>hdu 4622<br>题意：询问每个子串里包含的不同的子串的个数。<br>枚举每一个点作为起点做后缀自动机，维护自动机每个节点能有多少条路径到达。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(a,b) memset(a,b,sizeof(a))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int,int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mpr(a,b) make_pair(a,b)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ch = <span class="number">26</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100000</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SAM</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> f[N],chd[N][ch+<span class="number">1</span>],len[N],sw[<span class="number">200</span>];</span><br><span class="line">    <span class="comment">//ch+1 number of tempt suffix at status</span></span><br><span class="line">    <span class="keyword">int</span> last,sz;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        clr(chd[<span class="number">0</span>],<span class="number">0</span>);</span><br><span class="line">        f[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">        chd[<span class="number">0</span>][ch] = <span class="number">1</span>;</span><br><span class="line">        last = <span class="number">0</span>;</span><br><span class="line">        sz = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)</span><br><span class="line">            sw[i+<span class="string">'a'</span>] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">char</span> inc,<span class="keyword">int</span> l)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> c = sw[inc];</span><br><span class="line">        <span class="keyword">int</span> x = last;</span><br><span class="line">        last = ++sz;</span><br><span class="line">        clr(chd[sz],<span class="number">0</span>);</span><br><span class="line">        len[sz] = l;</span><br><span class="line">        <span class="keyword">for</span>(;x!=<span class="number">-1</span>&amp;&amp;chd[x][c]==<span class="number">0</span>;x=f[x])&#123;</span><br><span class="line">            chd[x][c] = sz;</span><br><span class="line">            chd[last][ch] += chd[x][ch];</span><br><span class="line">            ans += chd[x][ch];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(x == <span class="number">-1</span>)&#123;</span><br><span class="line">            f[sz]=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">int</span> y = chd[x][c];</span><br><span class="line">            <span class="keyword">if</span>(len[y] == len[x]+<span class="number">1</span>)&#123;</span><br><span class="line">                f[sz]=y;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                sz++;</span><br><span class="line">                len[sz] = len[x] + <span class="number">1</span>;</span><br><span class="line">                </span><br><span class="line">                <span class="built_in">memcpy</span>(chd[sz],chd[y],ch*<span class="number">4</span>);</span><br><span class="line"><span class="comment">//                for(int i=0;i&lt;ch;i++) chd[sz][i] = chd[y][i];</span></span><br><span class="line">                chd[sz][ch] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">                f[sz] = f[y];</span><br><span class="line">                f[last] = f[y] = sz;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span>(;x!=<span class="number">-1</span>&amp;&amp;chd[x][c]==y;x=f[x])&#123;</span><br><span class="line">                    chd[x][c] = sz;</span><br><span class="line">                    chd[y][ch] -= chd[x][ch];</span><br><span class="line">                    chd[sz][ch] += chd[x][ch];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;sam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> s[<span class="number">100000</span>];</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> g[<span class="number">2005</span>][<span class="number">2005</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//    freopen("/home/zyc/Documents/Code/cpp/in","r",stdin);</span></span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line">    <span class="keyword">while</span>(T--)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>,s);</span><br><span class="line">        n = <span class="built_in">strlen</span>(s);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            sam.init();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;n;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(j!=i)</span><br><span class="line">                    g[i][j] = g[i][j<span class="number">-1</span>] + sam.add(s[j],j-i+<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    g[i][j] = sam.add(s[j],j-i+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> Q;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;Q);</span><br><span class="line">        <span class="keyword">while</span>(Q--)&#123;</span><br><span class="line">            <span class="keyword">int</span> l,r;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;l,&amp;r);</span><br><span class="line">            l--;r--;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,g[l][r]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></div><p class="readmore"><a href="/2013/08/06/suffix-automation/">Mehr lesen</a></p></div><div class="post"><h1 class="post-title"><a href="/2013/07/31/HDU-4622-Reincarnation/">HDU 4622 Reincarnation</a></h1><div class="post-meta">2013-07-31</div><div class="post-content"><p>题意： 长度为2000的串，10000个询问：[l,r]这个子串包含多少不同的子串。</p>
<p>比赛时用的后缀数组o(n<em>Q) ，赛后用的hash o(n</em>n*log(n)) 和后缀自动机，这个log的出现是因为hash写不来 = = .</p>
<p>后缀数组解发：<br>先对原来的串做一遍后缀数组，对于每个询问,对sa数组进行扫描，如果当前前缀在[l,r]范围内，就找到之前和他公共前缀最长且也在[l,r]范围内的串，lcp最长公共前缀，答案加上 串在当前询问中的长度减去最长公共前缀。<br>值得注意的是和当前串公共前缀最长的并不就是上一次在[l,r]范围内的串，也有可能是再之前，原因是询问的区间，相当于给每个串截断了一部分，所以区间里sa数组不再代表这区间里的串的排名，处理比较容易，见代码</p></div><p class="readmore"><a href="/2013/07/31/HDU-4622-Reincarnation/">Mehr lesen</a></p></div><div class="post"><h1 class="post-title"><a href="/2013/07/30/Codeforces-316G3Good-Substrings-30-points/">Codeforces 316G3Good Substrings (30 points)</a></h1><div class="post-meta">2013-07-30</div><div class="post-content"><p>题意：给一个长为50000的字符串t，还有10个约束(p,l,r), 当某一字符串s在p中出现的次数大于等于l,小于等于r时满足约束，问t有多少个不同的子串满足所有约束。</p>
<p>先考虑t的子串的性质：<br>t 的长度为len<br>假设以 x 为起点的子串，终点在[l,len]范围内时满足所有约束条件中的小于部分。<br>那么对于以x+1为起点的子串，终点在[l1,len]范围内时满足所有约束条件中的小于部分<br>则有  l1 &gt; l ，所以用 two point 先行扫描出l[0]~l[len-1] 。其中扫描过程中如何判断某一子串在约束串中出现的次数，用二分+后缀数组。<br>同样处理出 r[0]~r[len-1] 满足范围内时满足所有约束条件中的大于部分<br>那么对于x为起点的串，终点在l[x]~r[x]之间时满足所有约束条件。<br>还没结束，还需要判重，后缀数组再次登程。<br>我们需要找到以x为起点的串，在(0,x-1)为起点的串中出现过的次数，转换一下可以变成求x为起点的串与之前串最多能匹配到多长，记录为repl[x]，从前从后扫各一遍sa数组，用树状数组和后缀数组的lcp来搞。<br>答案就是对 r[i]-max(repl[i],l[i])+1 (0&lt;=i&lt;len) 求和。</p></div><p class="readmore"><a href="/2013/07/30/Codeforces-316G3Good-Substrings-30-points/">Mehr lesen</a></p></div><div class="post"><h1 class="post-title"><a href="/2013/07/24/URAL-1956-Fire-Signals/">URAL 1956 Fire Signals</a></h1><div class="post-meta">2013-07-24</div><div class="post-content"><p>题意：<br>求一条直线满足，所有平面上点到这条直线的距离之和最小，点数n&lt;1000，输出最小的距离纸盒之和。</p>
<p>经过长时间的YY，得出经过平面上的两个点的直线包含最优解。可以由  dis = |a<em>x+b</em>y+c|/sqrt(a<em>a+b</em>b) 得到。<br>因为在直线一侧的点 dis 的正负号是相同的，可以利用这一点。先枚举一点，另外的点按到这点的角度排序，然后扫描枚举另一点，维护两边的点的x之和，y之和，用abs(sum(a<em>x0+b</em>y0+c) -abs(a<em>x1+b</em>y1+c))/sqrt(a<em>a+b</em>b）  跟新答案，x0,y0是直线一边点的x,y的和,x1,y1是另一边的。</p></div><p class="readmore"><a href="/2013/07/24/URAL-1956-Fire-Signals/">Mehr lesen</a></p></div><div class="post"><h1 class="post-title"><a href="/2013/07/16/A-Contest-to-Celebrate-Girlfriend-s-Birthday-by-Staginner/"> A Contest to Celebrate Girlfriend's Birthday by Staginner</a></h1><div class="post-meta">2013-07-16</div><div class="post-content"><p>####Cut the rope II</p>
<p>题意：把长度为L的线段进行分割，分割后每一段都不相同的方案数。L&lt;=50000</p>
<p>dp比较赞，可以发现因为每一段都不相同所以 至多会有 x段，x*(x+1)/2 = L。x最大值在320左右。<br>dp[i][j][k]  i&lt;=320,j&lt;=50000 k&lt;2<br>k=0 表示现有i段用掉j的长度时不存在长度为1的段的方案数。<br>k=1 表示现有i段用掉j的长度时存在长度为1的段的方案数。</p></div><p class="readmore"><a href="/2013/07/16/A-Contest-to-Celebrate-Girlfriend-s-Birthday-by-Staginner/">Mehr lesen</a></p></div><div class="post"><h1 class="post-title"><a href="/2013/07/15/Codeforces-MemSQL-start-c-up-Round-1/">Codeforces MemSQL start[c]up Round 1</a></h1><div class="post-meta">2013-07-15</div><div class="post-content"><p>####A    Square and Rectangles</p>
<p>题意：给定5个不重叠的长方形，问是否组合成一个正方形。x,y范围10^5</p>
<p>先得到x，y的最大最小值<br>然后在这个范围内枚举 x ，判断每一个x的位置y是否完全覆盖，由于不相交，直接把包含这个x的长方形的y差值相加，判断是否和y最大值和最小值的差值相等。<br>trick: 漏判 x和y最大值和最小值的差值是否相等。</p></div><p class="readmore"><a href="/2013/07/15/Codeforces-MemSQL-start-c-up-Round-1/">Mehr lesen</a></p></div><nav class="page-navigator"><a class="extend prev" rel="prev" href="/">Vorheriger</a><a class="page-number" href="/">1</a><span class="page-number current">2</span></nav></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Kategorien</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/acm/" style="font-size: 15px;">acm</a> <a href="/tags/algorithm/" style="font-size: 15px;">algorithm</a> <a href="/tags/ssist-conference/" style="font-size: 15px;">ssist,conference</a> <a href="/tags/ssist-conference/" style="font-size: 15px;">ssist, conference</a> <a href="/tags/dialogue/" style="font-size: 15px;">dialogue,</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/01/15/survey-on-dialogue-system/">A Survey on Dialogue Systems:Recent Advances and New Frontiers</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/15/SSIST-day3/">SSIST by-talk day3</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/15/SSIST-day2/">SSIST by-talk day2</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/15/SSIST-day1/">SSIST by-talk day1</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/15/Finding-similar-articles/">Finding similar articles</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/09/03/hdu-4456-crowd/">hdu 4456 crowd</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/08/18/CF-338E-Optimize/">CF 338E Optimize!</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/08/17/两题类似的数位DP/"> 两题类似的数位DP</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/08/17/HDU-4684-The-Budget-of-Traveler/">HDU 4684 The Budget of Traveler</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/08/12/SRM-475-DIV1-900/">SRM 475 DIV1 900</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">_LT_zyc.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>